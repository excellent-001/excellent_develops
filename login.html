<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login • Excellent_Develops</title>
  <link rel="icon" href="favicon.ico" />
  <style>
    :root{
      --bg1:#130b1c; --bg2:#1b0f2a; --card:#201233; --text:#f3ecff;
      --muted:#c9bbff; --accent:#a36cff; --accent-2:#e29bff; --error:#ff6b6b; --ring:rgba(163,108,255,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter, system-ui, Segoe UI, Roboto, Arial, sans-serif; color:var(--text);
      background:
        radial-gradient(1200px 700px at -10% -10%, #3a1a73 0%, transparent 60%),
        radial-gradient(1000px 600px at 110% 110%, #5c1d91 0%, transparent 60%),
        linear-gradient(180deg,var(--bg1),var(--bg2));
      display:grid; place-items:start center; padding:28px 16px;
    }
    .wrap{width:100%; max-width:840px; display:grid; gap:28px}
    .hero{
      display:grid; gap:12px; justify-items:center; text-align:center; margin-top:6px;
    }
    .logo{
      width:120px; height:120px; border-radius:50%; overflow:hidden;
      border:2px solid rgba(255,255,255,.08);
      box-shadow:0 10px 30px rgba(0,0,0,.45), 0 0 0 8px rgba(255,255,255,.03);
      background:#0b0b1a center/cover no-repeat;
    }
    h1{margin:6px 0 4px; font-size:28px; letter-spacing:.3px}
    .tag{margin:0; color:var(--muted); max-width:700px; line-height:1.6; font-size:15px}
    .boldline{font-weight:800; margin-top:6px}

    .card{
      background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.10);
      border-radius:20px; padding:18px;
      box-shadow:0 18px 60px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.03);
      backdrop-filter: blur(6px);
    }
    .grid{display:grid; grid-template-columns:1fr 1fr; gap:16px}
    @media (max-width:820px){ .grid{grid-template-columns:1fr} }

    .panel{display:grid; gap:12px}
    .panel h2{margin:0 0 4px; font-size:18px}
    .field{display:grid; gap:6px}
    label{font-size:13px; color:var(--muted)}
    input{
      width:100%; padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,.14);
      background:#1b1430; color:var(--text); outline:none; font-size:15px;
      transition: box-shadow .15s ease, border-color .15s ease, transform .03s ease;
    }
    input:focus{border-color:var(--accent); box-shadow:0 0 0 4px var(--ring)}
    .row{display:flex; gap:10px; align-items:center; justify-content:space-between}
    .hint{color:var(--muted); font-size:13px}
    .error{color:var(--error); font-size:13px; min-height:18px}
    .btn{
      width:100%; padding:12px 14px; border-radius:12px; border:none; cursor:pointer;
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#140a1f; font-weight:800; letter-spacing:.2px; font-size:15px;
      box-shadow:0 10px 24px rgba(163,108,255,.35); transition:transform .03s ease, filter .15s ease;
    }
    .btn:active{transform:translateY(1px); filter:brightness(.96)}

    footer{
      margin:8px auto 0; text-align:center; color:var(--muted); font-size:12px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Top: Logo + Name + Welcome -->
    <section class="hero">
      <img class="logo" src="https://raw.githubusercontent.com/excellent-001/excellent_develops/refs/heads/main/logo.png"
           alt="Excellent_Develops logo"
           onerror="this.src='https://dummyimage.com/240x240/201233/e9e3ff&text=ED';" />
      <h1>Welcome to Excellent_Develops</h1>
      <p class="tag">Building ideas that matter — technology, community, and youth-driven change.</p>
      <p class="tag boldline"><strong>Please <u>login</u> to access my portfolio.</strong></p>
    </section>

    <!-- Middle: Login + Create Account (spaced, not squeezed) -->
    <section class="card">
      <div class="grid">
        <!-- Login -->
        <form id="loginForm" class="panel">
          <h2>Sign In</h2>
          <div class="field">
            <label for="login-email">Email</label>
            <input id="login-email" type="email" placeholder="you@email.com" required />
          </div>
          <div class="field">
            <label for="login-pass">Password</label>
            <input id="login-pass" type="password" placeholder="••••••••" minlength="6" required />
          </div>
          <div class="row">
            <span class="hint">Tip: use the email you registered with.</span>
            <a href="#" id="goReset" class="hint" style="text-decoration:underline">Forgot password?</a>
          </div>
          <div class="error" id="login-error"></div>
          <button class="btn" type="submit">Login</button>
        </form>

        <!-- Create Account -->
        <form id="signupForm" class="panel">
          <h2>Create Account</h2>
          <div class="row" style="gap:12px">
            <div class="field" style="flex:1">
              <label for="first-name">First Name</label>
              <input id="first-name" type="text" placeholder="First name" required />
            </div>
            <div class="field" style="flex:1">
              <label for="surname">Surname</label>
              <input id="surname" type="text" placeholder="Surname" required />
            </div>
          </div>
          <div class="field">
            <label for="username">Username</label>
            <input id="username" type="text" placeholder="e.g. emini_excellent" required />
          </div>
          <div class="field">
            <label for="signup-email">Email Address</label>
            <input id="signup-email" type="email" placeholder="new@email.com" required />
          </div>
          <div class="row" style="gap:12px">
            <div class="field" style="flex:1">
              <label for="signup-pass">Password (min 6)</label>
              <input id="signup-pass" type="password" placeholder="Create password" minlength="6" required />
            </div>
            <div class="field" style="flex:1">
              <label for="signup-pass2">Confirm Password</label>
              <input id="signup-pass2" type="password" placeholder="Confirm password" minlength="6" required />
            </div>
          </div>
          <div class="error" id="signup-error"></div>
          <button class="btn" type="submit">Create Account</button>
          <div class="hint">Already registered? Use the Login form.</div>
        </form>
      </div>
    </section>

    <!-- Bottom: Footer -->
    <footer>© 2025 Excellent_Develops. All rights reserved.</footer>
  </div>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
    import {
      getAuth, setPersistence, browserLocalPersistence,
      signInWithEmailAndPassword, createUserWithEmailAndPassword,
      sendPasswordResetEmail
    } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";
    import {
      getFirestore, doc, setDoc, serverTimestamp
    } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

    // === YOUR CONFIG (from you) ===
    const firebaseConfig = {
      apiKey: "AIzaSyDoTlLIlOyoYiTZLQmzVcDro-cw9TCU9qI",
      authDomain: "excellent-d056e.firebaseapp.com",
      projectId: "excellent-d056e",
      storageBucket: "excellent-d056e.firebasestorage.app",
      messagingSenderId: "629984941607",
      appId: "1:629984941607:web:3d7fc2478f555d45a0e002",
      measurementId: "G-G3RCTDSY27"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db   = getFirestore(app);
    await setPersistence(auth, browserLocalPersistence);

    // Helpers
    const $ = (id)=> document.getElementById(id);
    const show = (id,msg)=> $(id).textContent = msg||"";
    const neat = (err)=>{
      const m = (err?.code||"").replace("auth/","");
      const map = {
        "invalid-email":"Invalid email address",
        "missing-password":"Password required",
        "weak-password":"Password must be 6+ chars",
        "email-already-in-use":"Email already in use",
        "user-not-found":"No account for that email",
        "wrong-password":"Incorrect password",
        "too-many-requests":"Too many attempts — try later"
      };
      return map[m] || "Something went wrong. Please try again.";
    };

    // LOGIN
    $('loginForm').addEventListener('submit', async (e)=>{
      e.preventDefault(); show('login-error','');
      const email = $('login-email').value.trim();
      const pass  = $('login-pass').value;
      try{
        await signInWithEmailAndPassword(auth, email, pass);
        // Go to Welcome (with picture + Visit button)
        window.location.href = 'welcome.html';
      }catch(err){ show('login-error', neat(err)); }
    });

    // SIGNUP
    $('signupForm').addEventListener('submit', async (e)=>{
      e.preventDefault(); show('signup-error','');
      const first = $('first-name').value.trim();
      const last  = $('surname').value.trim();
      const uname = $('username').value.trim();
      const email = $('signup-email').value.trim();
      const p1    = $('signup-pass').value;
      const p2    = $('signup-pass2').value;

      if(p1 !== p2){ show('signup-error','Passwords do not match'); return; }
      try{
        const cred = await createUserWithEmailAndPassword(auth, email, p1);
        // Save profile
        await setDoc(doc(db, 'users', cred.user.uid),{
          firstName:first, surname:last, username:uname, email,
          createdAt: serverTimestamp()
        });
        // Force them to login again (as requested)
        alert('Account created! Please login with your email and password.');
        window.location.href = 'login.html';
      }catch(err){ show('signup-error', neat(err)); }
    });

    // FORGOT PASSWORD
    $('goReset').addEventListener('click', async (e)=>{
      e.preventDefault();
      const email = prompt('Enter your account email to receive a reset link:');
      if(!email) return;
      try{ await sendPasswordResetEmail(auth, email);
           alert('Reset link sent! Please check your inbox (and spam).'); }
      catch(err){ alert(neat(err)); }
    });
  </script>
</body>
</html>
