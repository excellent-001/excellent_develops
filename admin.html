<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Excellent Developers - Admin Panel</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    body { background-color: #121212; color: white; }
    .sidebar { background: #1f1f1f; height: 100vh; padding: 20px; }
    .sidebar a { color: white; display: block; padding: 10px; text-decoration: none; }
    .sidebar a:hover { background: #333; }
    .content { padding: 20px; }
</style>
</head>
<body>

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-2 sidebar">
            <h4>Admin Menu</h4>
            <a href="#overview" onclick="showSection('overview')">üìä Overview</a>
            <a href="#traffic" onclick="showSection('traffic')">üåç Traffic Monitor</a>
            <a href="#feedback" onclick="showSection('feedback')">üì© Feedback Manager</a>
            <a href="#projects" onclick="showSection('projects')">üìÅ Project Stats</a>
            <a href="#settings" onclick="showSection('settings')">‚öôÔ∏è Settings</a>
            <a href="#security" onclick="showSection('security')">üõ°Ô∏è Security Logs</a>
            <a href="#" onclick="logout()">üö™ Logout</a>
        </div>

        <!-- Content -->
        <div class="col-md-10 content">
            <!-- Overview -->
            <div id="overview" class="section">
                <h2>Overview</h2>
                <p>Total Visitors: <span id="totalVisitors">0</span></p>
                <p>Total Feedback: <span id="totalFeedback">0</span></p>
                <canvas id="visitorsChart"></canvas>
            </div>

            <!-- Traffic Monitor -->
            <div id="traffic" class="section" style="display:none;">
                <h2>Traffic Monitor</h2>
                <table class="table table-dark">
                    <thead>
                        <tr>
                            <th>IP</th>
                            <th>Location</th>
                            <th>ISP</th>
                            <th>Device</th>
                            <th>Time</th>
                        </tr>
                    </thead>
                    <tbody id="trafficTable"></tbody>
                </table>
            </div>

            <!-- Feedback -->
            <div id="feedback" class="section" style="display:none;">
                <h2>Feedback Manager</h2>
                <table class="table table-dark">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Message</th>
                            <th>Project</th>
                            <th>Time</th>
                        </tr>
                    </thead>
                    <tbody id="feedbackTable"></tbody>
                </table>
            </div>

            <!-- Projects -->
            <div id="projects" class="section" style="display:none;">
                <h2>Project Stats</h2>
                <canvas id="projectChart"></canvas>
            </div>

            <!-- Settings -->
            <div id="settings" class="section" style="display:none;">
                <h2>Settings</h2>
                <p>Edit site configuration here.</p>
            </div>

            <!-- Security Logs -->
            <div id="security" class="section" style="display:none;">
                <h2>Security Logs</h2>
                <table class="table table-dark">
                    <thead>
                        <tr>
                            <th>Event</th>
                            <th>Time</th>
                        </tr>
                    </thead>
                    <tbody id="securityLogs"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
    // Firebase Config
    const firebaseConfig = {
        apiKey: "YOUR_FIREBASE_KEY",
        authDomain: "YOUR_PROJECT.firebaseapp.com",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_PROJECT.appspot.com",
        messagingSenderId: "SENDER_ID",
        appId: "APP_ID"
    };
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    function showSection(id) {
        document.querySelectorAll(".section").forEach(sec => sec.style.display = "none");
        document.getElementById(id).style.display = "block";
    }

    function logout() {
        auth.signOut().then(() => location.reload());
    }

    // Fetch feedback from Firebase
    function loadFeedback() {
        db.collection("feedback").onSnapshot(snapshot => {
            document.getElementById("feedbackTable").innerHTML = "";
            document.getElementById("totalFeedback").innerText = snapshot.size;
            snapshot.forEach(doc => {
                let data = doc.data();
                document.getElementById("feedbackTable").innerHTML += `
                    <tr>
                        <td>${data.name}</td>
                        <td>${data.email}</td>
                        <td>${data.message}</td>
                        <td>${data.project}</td>
                        <td>${new Date(data.timestamp).toLocaleString()}</td>
                    </tr>
                `;
            });
        });
    }

    // Fetch traffic logs
    function loadTraffic() {
        db.collection("traffic").orderBy("time", "desc").limit(50).onSnapshot(snapshot => {
            document.getElementById("trafficTable").innerHTML = "";
            document.getElementById("totalVisitors").innerText = snapshot.size;
            snapshot.forEach(doc => {
                let data = doc.data();
                document.getElementById("trafficTable").innerHTML += `
                    <tr>
                        <td>${data.ip}</td>
                        <td>${data.location}</td>
                        <td>${data.isp}</td>
                        <td>${data.device}</td>
                        <td>${new Date(data.time).toLocaleString()}</td>
                    </tr>
                `;
            });
        });
    }

    loadFeedback();
    loadTraffic();
</script>

</body>
  </html>
