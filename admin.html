<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Excellent_Develops Admin Panel</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    display: flex;
    background: #f8f8f8;
  }
  nav {
    background: #4b0082;
    color: white;
    width: 250px;
    padding-top: 20px;
    height: 100vh;
    position: fixed;
  }
  nav h2 {
    text-align: center;
    margin-bottom: 20px;
  }
  nav a {
    display: block;
    color: white;
    padding: 12px;
    text-decoration: none;
  }
  nav a:hover {
    background: #5e2b91;
  }
  main {
    margin-left: 250px;
    padding: 20px;
    width: calc(100% - 250px);
  }
  .card {
    background: white;
    padding: 20px;
    margin-bottom: 15px;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  button {
    background: #4b0082;
    color: white;
    padding: 8px 14px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }
  button:hover {
    background: #5e2b91;
  }
  textarea, input {
    width: 100%;
    padding: 8px;
    margin: 6px 0;
    border-radius: 5px;
    border: 1px solid #ccc;
  }
</style>
</head>
<body>

<nav>
  <h2>Admin Panel</h2>
  <a href="#dashboard">ðŸ“Š Dashboard</a>
  <a href="#settings">âš™ Settings</a>
  <a href="#logs">ðŸ“œ Logs</a>
  <a href="#security">ðŸ”’ Security</a>
  <a href="#" onclick="logout()">ðŸšª Logout</a>
</nav>

<main>
  <section id="dashboard" class="card">
    <h3>ðŸ“Š Dashboard Overview</h3>
    <p>Total Users: <span id="totalUsers">Loading...</span></p>
    <p>Active Sessions: <span id="activeSessions">Loading...</span></p>
  </section>

  <section id="settings" class="card">
    <h3>âš™ Site Settings</h3>
    <button onclick="toggleMaintenance(true)">Enable Maintenance Mode</button>
    <button onclick="toggleMaintenance(false)">Disable Maintenance Mode</button>
    <hr>
    <h4>ðŸ“¢ Send Announcement</h4>
    <textarea id="announcementMessage" placeholder="Write your announcement..."></textarea>
    <button onclick="sendAnnouncement()">Send</button>
  </section>

  <section id="logs" class="card">
    <h3>ðŸ“œ Login Attempts</h3>
    <div id="logList">Loading logs...</div>
  </section>

  <section id="security" class="card">
    <h3>ðŸ”’ Security Tools</h3>
    <button onclick="checkIP()">Check My IP & ISP</button>
    <div id="ipInfo"></div>
  </section>
</main>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDoTlLIlOyoYiTZLQmzVcDro-cw9TCU9qI",
    authDomain: "excellent-d056e.firebaseapp.com",
    projectId: "excellent-d056e",
    storageBucket: "excellent-d056e.firebasestorage.app",
    messagingSenderId: "629984941607",
    appId: "1:629984941607:web:3d7fc2478f555d45a0e002",
    measurementId: "G-G3RCTDSY27"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const adminEmail = "youremail@example.com"; // change to your real admin email

  onAuthStateChanged(auth, (user) => {
    if (!user || user.email !== adminEmail) {
      window.location.href = "welcome.html";
    }
  });

  window.logout = async () => {
    await signOut(auth);
    window.location.href = "index.html";
  };

  window.toggleMaintenance = (status) => {
    alert(status ? "Maintenance Mode Enabled" : "Maintenance Mode Disabled");
  };

  window.sendAnnouncement = () => {
    const msg = document.getElementById("announcementMessage").value;
    if (!msg.trim()) return alert("Message is empty!");
    alert("Announcement sent: " + msg);
  };

  window.checkIP = async () => {
    try {
      const res = await fetch("https://ipapi.co/json/");
      const data = await res.json();
      document.getElementById("ipInfo").innerHTML =
        `<p>IP: ${data.ip}</p>
         <p>ISP: ${data.org}</p>
         <p>City: ${data.city}</p>
         <p>Country: ${data.country_name}</p>`;
    } catch (e) {
      alert("Failed to fetch IP info");
    }
  };
</script>

</body>
</html>
