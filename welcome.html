<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Welcome â€” Excellent_Develops</title>
  <style>
    :root { --g1:#0ea5e9; --g2:#1e3a8a; --accent:#38bdf8; }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:Arial, sans-serif; color:#fff;
      min-height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:18px;
      background:linear-gradient(135deg,var(--g1),var(--g2));
      padding:18px;
    }
    .card{
      width:min(560px,95vw);
      background:rgba(255,255,255,.07); border:1px solid rgba(255,255,255,.2);
      border-radius:18px; padding:22px; text-align:center; backdrop-filter:blur(6px);
      box-shadow:0 10px 28px rgba(0,0,0,.35);
    }
    img.pfp{width:120px;height:120px;object-fit:cover;border-radius:50%;border:3px solid rgba(255,255,255,.35)}
    h1{margin:10px 0 6px}
    p.sub{margin:0 0 14px; color:#e6f3ff}
    .row{display:flex; flex-wrap:wrap; gap:12px; justify-content:center}
    .btn{
      padding:12px 16px; border-radius:12px; border:0; cursor:pointer; font-weight:700;
      background:var(--accent); color:#002; min-width:160px;
    }
    .btn.ghost{background:rgba(255,255,255,.15); color:#fff; border:1px solid rgba(255,255,255,.25)}
    footer{
      position:fixed; left:0; right:0; bottom:0; background:#fff; color:#000;
      text-align:center; font-size:13px; padding:8px 10px; border-top:1px solid rgba(0,0,0,.08);
    }
    /* toast */
    #toast { position:fixed; top:16px; right:16px; background:#111827; color:#fff; padding:10px 14px; border-radius:10px; display:none; }
  </style>
</head>
<body>
  <div class="card">
    <img class="pfp" src="https://raw.githubusercontent.com/excellent-001/excellent_develops/refs/heads/main/Screenshot_20250811-105613.jpg" alt="Profile">
    <h1>Welcome, <span id="firstName">User</span> ðŸ‘‹</h1>
    <p class="sub">Glad to have you back.</p>

    <div class="row" style="margin-top:8px">
      <button class="btn" onclick="location.href='projects.html'">View My Projects</button>
      <button class="btn ghost" id="adminBtn" style="display:none" onclick="location.href='admin.html'">Admin Panel</button>
      <button class="btn ghost" id="logoutBtn">Logout</button>
    </div>
  </div>

  <div id="toast">Login successful ðŸŽ‰</div>
  <footer>Â© 2025 Excellent Global Conceptional. All rights reserved.</footer>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";

    // ----- ADMIN WHITELIST -----
    const ADMIN_EMAILS = ["quareebalabi22@gmail.com"];

    const firebaseConfig = {
      apiKey: "AIzaSyDoTlLIlOyoYiTZLQmzVcDro-cw9TCU9qI",
      authDomain: "excellent-d056e.firebaseapp.com",
      projectId: "excellent-d056e",
      storageBucket: "excellent-d056e.firebasestorage.app",
      messagingSenderId: "629984941607",
      appId: "1:629984941607:web:3d7fc2478f555d45a0e002",
      measurementId: "G-G3RCTDSY27"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const firstNameEl = document.getElementById('firstName');
    const adminBtn = document.getElementById('adminBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const toast = document.getElementById('toast');

    function showToastOnce() {
      if (sessionStorage.getItem('justLoggedIn') === '1') {
        sessionStorage.removeItem('justLoggedIn');
        toast.style.display = 'block';
        setTimeout(()=> toast.style.display='none', 3000);
      }
    }

    onAuthStateChanged(auth, (user) => {
      if (!user) {
        // not signed in â€” go to login
        window.location.href = 'index.html';
        return;
      }

      // set name
      const fromLS = localStorage.getItem('firstName');
      const first = fromLS || (user.displayName ? user.displayName.split(' ')[0] : 'User');
      firstNameEl.textContent = first;

      // admin visibility
      const isAdmin = ADMIN_EMAILS.includes(user.email || '');
      if (isAdmin) adminBtn.style.display = 'inline-block';

      showToastOnce();
    });

    logoutBtn.onclick = async () => {
      try {
        await signOut(auth);
      } finally {
        window.location.href = 'index.html';
      }
    };
  </script>
</body>
</html>
